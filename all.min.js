function Gallery(e,t,a,l){this.title=e,this.latlng=t,this.args=l,this.setMap(a)}function removeGallery(){for(history.pushState("",document.title,window.location.pathname+window.location.search);photosWrapper.childNodes.length>3;)photosWrapper.removeChild(photosWrapper.lastChild);var e=new TimelineMax;e.to([photosWrapper,closeGalleryBtn,galleryShare],.5,{opacity:0,display:"none"}).to(galleryWrapper,.5,{width:"0",left:"50%",display:"none",opacity:0,ease:Power1.easeOut})}function initialize(){var e=new google.maps.LatLng(48.856614,2.352222),t={zoom:2,center:e,scrollwheel:!1,streetViewControl:!1,mapTypeControl:!1},a=[{featureType:"all",elementType:"all",stylers:[{weight:"1"}]},{featureType:"all",elementType:"geometry",stylers:[{color:"#07a1b3"}]},{featureType:"all",elementType:"geometry.stroke",stylers:[{visibility:"on"},{weight:".5"}]},{featureType:"all",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"all",elementType:"labels.text.fill",stylers:[{color:"#ffffff"},{visibility:"off"}]},{featureType:"all",elementType:"labels.text.stroke",stylers:[{visibility:"off"},{color:"#3e606f"},{weight:2},{gamma:.84}]},{featureType:"all",elementType:"labels.icon",stylers:[{visibility:"off"}]},{featureType:"administrative",elementType:"geometry",stylers:[{weight:.6},{color:"#038b9e"}]},{featureType:"landscape",elementType:"geometry",stylers:[{color:"#0097a9"}]},{featureType:"poi.attraction",elementType:"geometry.fill",stylers:[{color:"#03a2b6"}]},{featureType:"poi.business",elementType:"geometry",stylers:[{color:"#04acc0"}]},{featureType:"poi.government",elementType:"geometry",stylers:[{color:"#03a2b6"}]},{featureType:"poi.medical",elementType:"geometry",stylers:[{color:"#03a2b6"}]},{featureType:"poi.park",elementType:"geometry",stylers:[{weight:"1.00"},{color:"#04b2c6"}]},{featureType:"poi.place_of_worship",elementType:"geometry",stylers:[{color:"#03a2b6"}]},{featureType:"poi.school",elementType:"geometry",stylers:[{color:"#03a2b6"}]},{featureType:"poi.sports_complex",elementType:"geometry.fill",stylers:[{color:"#03a2b6"}]},{featureType:"road",elementType:"all",stylers:[{color:"#008b9d"},{visibility:"on"}]},{featureType:"road",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"transit",elementType:"all",stylers:[{visibility:"on"}]},{featureType:"transit",elementType:"geometry",stylers:[{color:"#027184"}]},{featureType:"transit",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"water",elementType:"geometry.fill",stylers:[{color:"#03778a"}]}];mapContainer=document.getElementById("map-canvas"),map=new google.maps.Map(mapContainer,t),map.setOptions({styles:a});var l=new Gallery("france",e,map,{title:"france",description:"Honeymoon to France, 2015",numImages:8}),o=new Gallery("italy",new google.maps.LatLng(43.76956,11.255814),map,{title:"italy",description:"Study abroad in college, 2003",numImages:6}),r=new Gallery("seattle",new google.maps.LatLng(47.606209,-122.332071),map,{title:"seattle",description:"Visit Nathania with Raelyn, 2007",numImages:2}),n=new Gallery("japan",new google.maps.LatLng(36.204824,138.252924),map,{title:"japan",description:"Visit Sarah in Japan, 2009",numImages:2}),i=new Gallery("china",new google.maps.LatLng(39.904211,116.407395),map,{title:"china",description:"Highschool trip",numImages:10}),s=[l,o,r,n,i];google.maps.event.addListenerOnce(map,"tilesloaded",function(){var e=document.getElementsByTagName("header"),t=document.getElementsByTagName("footer"),a=document.getElementsByClassName("marker"),l=new TimelineMax;l.to(a,0,{opacity:1}).to(mapContainer,.5,{opacity:1},"begin").fromTo(e,2,{y:"-100"},{y:"0",opacity:1,scale:1,ease:Expo.easeInOut},"begin").fromTo(t,2,{bottom:"-100px"},{bottom:"10px",opacity:1,ease:Expo.easeInOut},"begin").staggerFrom(a,.6,{y:"-800px",ease:Elastic.easeOut.config(1,1),onComplete:galleryHash(s)},.15)}),document.getElementById("btn-about").addEventListener("click",showAbout),document.getElementById("btn-close-about").addEventListener("click",hideAbout)}function galleryHash(e){var t=window.location.hash;if(t){t=t.replace("#","");var a=getGallery(e,t);a&&a.showPhotos()}else console.log("show main page")}function getGallery(e,t){for(var a=0;a<e.length;a++)if(e[a].title==t)return e[a]}function showAbout(){var e=document.getElementsByTagName("header"),t=document.getElementsByTagName("footer"),a=(document.getElementsByClassName("marker"),document.getElementById("about")),l=new TimelineMax;l.to([mapContainer,e,t],.5,{left:"320px"},"begin").to(a,.5,{left:0},"begin")}function hideAbout(){var e=document.getElementsByTagName("header"),t=document.getElementsByTagName("footer"),a=(document.getElementsByClassName("marker"),document.getElementById("about")),l=new TimelineMax;l.to([mapContainer,e,t],.5,{left:"0px"},"begin").to(a,.5,{left:"-320px"},"begin")}var galleryWrapper=document.getElementById("gallery"),photosWrapper=document.getElementById("photos"),galleryTitle=document.getElementById("gallery-title"),galleryShare=document.getElementById("gallery-share"),cameraCloned=document.getElementById("camera"),closeGalleryBtn=document.getElementById("btn-close-gallery");Gallery.prototype=new google.maps.OverlayView,Gallery.prototype.draw=function(){var e=this,t=this.div,a=document.createElement("DIV"),l=document.createElement("H3");if(!t){t=this.div=document.createElement("div"),t.className="marker",t.style.position="absolute",t.style.cursor="pointer",t.style.overflow="visible",t.style.background="transparent",a.innerHTML=cameraCloned.innerHTML,a.setAttribute("class","marker-icon"),l.appendChild(document.createTextNode(e.args.title)),t.appendChild(a),t.appendChild(l),"undefined"!=typeof e.args.marker_id&&(t.dataset.marker_id=e.args.marker_id);var o=this.getPanes();o.overlayImage.appendChild(t)}var r=this.getProjection().fromLatLngToDivPixel(this.latlng);r&&(t.style.left=r.x-10+"px",t.style.top=r.y-20+"px"),google.maps.event.addDomListener(t,"mouseenter",function(e){}),google.maps.event.addDomListener(t,"mouseleave",function(e){}),google.maps.event.addDomListener(t,"click",function(t){e.showPhotos()})},Gallery.prototype.showPhotos=function(){galleryTitle.innerHTML=this.args.title,window.location.hash=this.args.title;var e=new TimelineMax;if(e.to(galleryWrapper,1,{width:"100%",left:0,display:"block",opacity:1,ease:Power1.easeInOut}).to([photosWrapper,closeGalleryBtn,galleryShare],.5,{opacity:1,display:"block"}),this.args.numImages)for(var t=1;t<=this.args.numImages;t++){var a=document.createElement("IMG");a.setAttribute("src","photos/"+this.args.title+"0"+t+".jpg"),a.setAttribute("class","gallery-img"),photosWrapper.appendChild(a)}var l=document.createElement("a");l.setAttribute("id","view-galleries"),l.setAttribute("href","#"),l.innerHTML="See more galleries",photosWrapper.appendChild(l);{var o=document.getElementById("gallery-fb"),r=document.getElementById("gallery-tw");"http://www.laura-evans.com/travel-map#"+this.args.title,this.args.title+" travel photography"}o.setAttribute("href","http://www.facebook.com/sharer/sharer.php?u=http://laura-evans.com/travel-map%23"+this.args.title+"&title=Travel Photo Gallery of "+this.args.title),r.setAttribute("href","http://twitter.com/intent/tweet?status=Travel Photo Gallery of "+this.args.title+"+http://laura-evans.com/travel-map%23"+this.args.title),l.addEventListener("click",function(e){e.preventDefault(),removeGallery()}),photosWrapper.scrollTop=0,photosWrapper.onscroll=function(e){console.log("scrolling")}},closeGalleryBtn.addEventListener("click",function(e){e.preventDefault(),removeGallery()}),Gallery.prototype.getPosition=function(){return this.latlng},google.maps.event.addDomListener(window,"load",initialize),$(document).ready(function(){$("#photos").scroll(function(){$(".gallery-img").each(function(e){var t=$(this).offset().top+100,a=$(window).scrollTop()+$(window).height();if(a>t){var l=$(this);TweenMax.to(l,1,{opacity:1,transform:"translateY(-5px)",ease:Sine.easeOut})}})})});